---
---
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="API docs for the startPlayerFromTrack method from the FlutterSoundPlayer class, for the Dart programming language.">
  <title>startPlayerFromTrack method - FlutterSoundPlayer class - player library - Dart API</title>

  
  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500,400i,400,300|Source+Sans+Pro:400,300,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="../../static-assets/github.css">
  <link rel="stylesheet" href="../../static-assets/styles.css">
  <link rel="icon" href="../../static-assets/favicon.png">

</head>

<body data-base-href="../../"
      data-using-base-href="false">

<div id="overlay-under-drawer"></div>

<header id="title">
  <button id="sidenav-left-toggle" type="button">&nbsp;</button>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="../../index.html">flutter_sound</a></li>
    <li><a href="../../player/player-library.html">player</a></li>
    <li><a href="../../player/FlutterSoundPlayer-class.html">FlutterSoundPlayer</a></li>
    <li class="self-crumb">startPlayerFromTrack method</li>
  </ol>
  <div class="self-name">startPlayerFromTrack</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<main>

  <div id="dartdoc-sidebar-left" class="col-xs-6 col-sm-3 col-md-2 sidebar sidebar-offcanvas-left">
    <header id="header-search-sidebar" class="hidden-l">
      <form class="search-sidebar" role="search">
        <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
      </form>
    </header>
    
    <ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
      <li><a href="../../index.html">flutter_sound</a></li>
      <li><a href="../../player/player-library.html">player</a></li>
      <li><a href="../../player/FlutterSoundPlayer-class.html">FlutterSoundPlayer</a></li>
      <li class="self-crumb">startPlayerFromTrack method</li>
    </ol>
    
    <h5>FlutterSoundPlayer class</h5>
    <ol>
    
        <li class="section-title"><a href="../../player/FlutterSoundPlayer-class.html#constructors">Constructors</a></li>
        <li><a href="../../player/FlutterSoundPlayer/FlutterSoundPlayer.html">FlutterSoundPlayer</a></li>
    
        <li class="section-title">
            <a href="../../player/FlutterSoundPlayer-class.html#instance-properties">Properties</a>
        </li>
        <li><a href="../../player/FlutterSoundPlayer/foodSink.html">foodSink</a></li>
        <li class="inherited"><a href="https://api.flutter.dev/flutter/dart-core/Object/hashCode.html">hashCode</a></li>
        <li><a href="../../player/FlutterSoundPlayer/isPaused.html">isPaused</a></li>
        <li><a href="../../player/FlutterSoundPlayer/isPlaying.html">isPlaying</a></li>
        <li><a href="../../player/FlutterSoundPlayer/isStopped.html">isStopped</a></li>
        <li><a href="../../player/FlutterSoundPlayer/onProgress.html">onProgress</a></li>
        <li><a href="../../player/FlutterSoundPlayer/playerState.html">playerState</a></li>
        <li class="inherited"><a href="https://api.flutter.dev/flutter/dart-core/Object/runtimeType.html">runtimeType</a></li>
    
        <li class="section-title"><a href="../../player/FlutterSoundPlayer-class.html#instance-methods">Methods</a></li>
        <li><a href="../../player/FlutterSoundPlayer/closeAudioSession.html">closeAudioSession</a></li>
        <li><a href="../../player/FlutterSoundPlayer/dispositionStream.html">dispositionStream</a></li>
        <li><a href="../../player/FlutterSoundPlayer/feedFromStream.html">feedFromStream</a></li>
        <li><a href="../../player/FlutterSoundPlayer/getPlayerState.html">getPlayerState</a></li>
        <li><a href="../../player/FlutterSoundPlayer/getProgress.html">getProgress</a></li>
        <li><a href="../../player/FlutterSoundPlayer/getResourcePath.html">getResourcePath</a></li>
        <li><a href="../../player/FlutterSoundPlayer/isDecoderSupported.html">isDecoderSupported</a></li>
        <li><a href="../../player/FlutterSoundPlayer/isOpen.html">isOpen</a></li>
        <li class="inherited"><a href="https://api.flutter.dev/flutter/dart-core/Object/noSuchMethod.html">noSuchMethod</a></li>
        <li><a href="../../player/FlutterSoundPlayer/nowPlaying.html">nowPlaying</a></li>
        <li><a href="../../player/FlutterSoundPlayer/openAudioSession.html">openAudioSession</a></li>
        <li><a href="../../player/FlutterSoundPlayer/pausePlayer.html">pausePlayer</a></li>
        <li><a href="../../player/FlutterSoundPlayer/resumePlayer.html">resumePlayer</a></li>
        <li><a href="../../player/FlutterSoundPlayer/seekToPlayer.html">seekToPlayer</a></li>
        <li><a href="../../player/FlutterSoundPlayer/setAudioFocus.html">setAudioFocus</a></li>
        <li><a href="../../player/FlutterSoundPlayer/setSubscriptionDuration.html">setSubscriptionDuration</a></li>
        <li><a href="../../player/FlutterSoundPlayer/setUIProgressBar.html">setUIProgressBar</a></li>
        <li><a href="../../player/FlutterSoundPlayer/setVolume.html">setVolume</a></li>
        <li><a href="../../player/FlutterSoundPlayer/startPlayer.html">startPlayer</a></li>
        <li><a href="../../player/FlutterSoundPlayer/startPlayerFromStream.html">startPlayerFromStream</a></li>
        <li><a href="../../player/FlutterSoundPlayer/startPlayerFromTrack.html">startPlayerFromTrack</a></li>
        <li><a href="../../player/FlutterSoundPlayer/stopPlayer.html">stopPlayer</a></li>
        <li class="inherited"><a href="https://api.flutter.dev/flutter/dart-core/Object/toString.html">toString</a></li>
    
        <li class="section-title inherited"><a href="../../player/FlutterSoundPlayer-class.html#operators">Operators</a></li>
        <li class="inherited"><a href="https://api.flutter.dev/flutter/dart-core/Object/operator_equals.html">operator ==</a></li>
    
    
    
    
    
    </ol>
  </div><!--/.sidebar-offcanvas-->

  <div id="dartdoc-main-content" class="col-xs-12 col-sm-9 col-md-8 main-content">
      <div><h1><span class="kind-method">startPlayerFromTrack</span> method </h1></div>

    <section class="multi-line-signature">
      <span class="returntype"><a href="https://api.flutter.dev/flutter/dart-async/Future-class.html">Future</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="https://api.flutter.dev/flutter/dart-core/Duration-class.html">Duration</a></span>&gt;</span></span>
            <span class="name ">startPlayerFromTrack</span>
(<wbr><ol class="parameter-list"><li><span class="parameter" id="startPlayerFromTrack-param-track"><span class="type-annotation"><a href="../../player/Track-class.html">Track</a></span> <span class="parameter-name">track</span>, </span></li>
<li><span class="parameter" id="startPlayerFromTrack-param-onSkipForward">{<span class="type-annotation"><a href="../../player/TonSkip.html">TonSkip</a></span> <span class="parameter-name">onSkipForward</span>, </span></li>
<li><span class="parameter" id="startPlayerFromTrack-param-onSkipBackward"><span class="type-annotation"><a href="../../player/TonSkip.html">TonSkip</a></span> <span class="parameter-name">onSkipBackward</span>, </span></li>
<li><span class="parameter" id="startPlayerFromTrack-param-onPaused"><span class="type-annotation"><a href="../../player/TonPaused.html">TonPaused</a></span> <span class="parameter-name">onPaused</span>, </span></li>
<li><span class="parameter" id="startPlayerFromTrack-param-whenFinished"><span class="type-annotation"><a href="../../player/TWhenFinished.html">TWhenFinished</a></span> <span class="parameter-name">whenFinished</span>, </span></li>
<li><span class="parameter" id="startPlayerFromTrack-param-progress"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/Duration-class.html">Duration</a></span> <span class="parameter-name">progress</span>, </span></li>
<li><span class="parameter" id="startPlayerFromTrack-param-duration"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/Duration-class.html">Duration</a></span> <span class="parameter-name">duration</span>, </span></li>
<li><span class="parameter" id="startPlayerFromTrack-param-defaultPauseResume"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/bool-class.html">bool</a></span> <span class="parameter-name">defaultPauseResume</span>, </span></li>
<li><span class="parameter" id="startPlayerFromTrack-param-removeUIWhenStopped"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/bool-class.html">bool</a></span> <span class="parameter-name">removeUIWhenStopped</span>: <span class="default-value">true</span>}</span></li>
</ol>)
      
    </section>
    <section class="desc markdown">
      <p>Play data from a track specification and display controls on the lock screen or an Apple Watch.</p>
<p>The Audio Session must have been open with the parameter <code>withUI</code>.</p>
<ul>
<li>
<p><code>track</code> parameter is a simple structure which describe the sound to play. Please see <a href="track.md">here the Track structure specification</a></p>
<ul>
<li><code>whenFinished:()</code> : A function for specifying what to do when the playback will be finished.</li>
</ul>
</li>
<li>
<p><code>onPaused:()</code> : this parameter can be :</p>
</li>
<li>
<p>a call back function to call when the user hit the Skip Pause button on the lock screen</p>
</li>
<li>
<p><code>null</code> : The pause button will be handled by Flutter Sound internal</p>
</li>
<li>
<p><code>onSkipForward:()</code> : this parameter can be :</p>
</li>
<li>
<p>a call back function to call when the user hit the Skip Forward button on the lock screen</p>
</li>
<li>
<p><code>null</code> : The Skip Forward button will be disabled</p>
</li>
<li>
<p><code>onSkipBackward:()</code> : this parameter can be :</p>
</li>
<li>
<p>a call back function to call when the user hit the Skip Backward button on the lock screen</p>
</li>
<li>
<p><null> : The Skip Backward button will be disabled</null></p>
</li>
<li>
<p><code>removeUIWhenStopped</code> : is a boolean to specify if the UI on the lock screen must be removed when the sound is finished or when the App does a <code>stopPlayer()</code>.
  Most of the time this parameter must be true. It is used only for the rare cases where the App wants to control the lock screen between two playbacks.
  Be aware that if the UI is not removed, the button Pause/Resume, Skip Backward and Skip Forward remain active between two playbacks.
  If you want to disable those button, use the API verb <code>nowPlaying()</code>.
  Remark: actually this parameter is implemented only on iOS.</p>
</li>
<li>
<p><code>defaultPauseResume</code> : is a boolean value to specify if Flutter Sound must pause/resume the playback by itself when the user hit the pause/resume button. Set this parameter to <em>FALSE</em> if the App wants to manage itself the pause/resume button. If you do not specify this parameter and the <code>onPaused</code> parameter is specified then Flutter Sound will assume <code>FALSE</code>. If you do not specify this parameter and the <code>onPaused</code> parameter is not specified then Flutter Sound will assume <code>TRUE</code>.
  Remark: actually this parameter is implemented only on iOS.</p>
</li>
</ul>
<p><code>startPlayerFromTrack()</code> returns a Duration Future, which is the record duration.</p>
<p><em>Example:</em></p>
<pre class="language-dart"><code class="language-dart">  final fileUri = "https://file-examples.com/wp-content/uploads/2017/11/file_example_MP3_700KB.mp3";
  Track track = Track( codec: Codec.opusOGG, trackPath: fileUri, trackAuthor: '3 Inches of Blood', trackTitle: 'Axes of Evil', albumArtAsset: albumArt )
  Duration d = await myPlayer.startPlayerFromTrack
  (
  track,
  whenFinished: ()
  {
    print( 'I hope you enjoyed listening to this song' );
  },
  );
</code></pre>
    </section>
    
    <section class="summary source-code" id="source">
      <h2><span>Implementation</span></h2>
      <pre class="language-dart"><code class="language-dart">Future&lt;Duration&gt; startPlayerFromTrack(
  Track track, {
  TonSkip onSkipForward,
  TonSkip onSkipBackward,
  TonPaused onPaused,
  TWhenFinished whenFinished,
  Duration progress,
  Duration duration,
  bool defaultPauseResume,
  bool removeUIWhenStopped = true,
}) async {
  print(&#39;FS:---&gt; startPlayerFromTrack &#39;);
  if (_isInited == Initialized.initializationInProgress) {
    throw (_InitializationInProgress());
  }
  if (_isInited != Initialized.fullyInitialized) {
    throw (_NotOpen());
  }
  &#47;&#47;Map retMap;
  await _lock.synchronized(() async {
    try {
      await _stop(); &#47;&#47; Just in case
      _audioPlayerFinishedPlaying = () {
        whenFinished();
      };
      _onSkipForward = onSkipForward;
      _onSkipBackward = onSkipBackward;
      _onPaused = onPaused;
      var trackDico = track.toMap();
      var what = &lt;String, dynamic&gt;{
        &#39;codec&#39;: track.codec,
        &#39;path&#39;: track.trackPath,
        &#39;fromDataBuffer&#39;: track.dataBuffer,
      };
      await _convert(what);
      var codec = what[&#39;codec&#39;] as Codec;
      trackDico[&#39;bufferCodecIndex&#39;] = codec.index;
      trackDico[&#39;path&#39;] = what[&#39;path&#39;];
      trackDico[&#39;dataBuffer&#39;] = what[&#39;fromDataBuffer&#39;];
      trackDico[&#39;codec&#39;] = codec.index;

      defaultPauseResume ??= (onPaused == null);
      if (_playerState != PlayerState.isStopped) {
        throw Exception(&#39;Player is not stopped&#39;);
      }
      _startPlayerCompleter = Completer&lt;Duration&gt;();
      var state =
          await FlutterSoundPlayerPlatform.instance.startPlayerFromTrack(
        this,
        progress: progress,
        duration: duration,
        track: trackDico,
        canPause: (onPaused != null || defaultPauseResume),
        canSkipForward: (onSkipForward != null),
        canSkipBackward: (onSkipBackward != null),
        defaultPauseResume: defaultPauseResume,
        removeUIWhenStopped: removeUIWhenStopped,
      );
      _playerState = PlayerState.values[state];
    } on Exception {
      rethrow;
    }
  });
  &#47;&#47;Duration d = Duration(milliseconds: retMap[&#39;duration&#39;] as int);
  &#47;&#47;int state = retMap[&#39;state&#39;] as int;
  &#47;&#47;playerState = PlayerState.values[state];
  print(&#39;FS:&lt;--- startPlayerFromTrack &#39;);
  return _startPlayerCompleter.future;
}</code></pre>
    </section>

  </div> <!-- /.main-content -->

  <div id="dartdoc-sidebar-right" class="col-xs-6 col-sm-6 col-md-2 sidebar sidebar-offcanvas-right">
  </div><!--/.sidebar-offcanvas-->

</main>

<footer>
  <span class="no-break">
    flutter_sound
      7.4.9+1
  </span>

</footer>

<script src="../../static-assets/typeahead.bundle.min.js"></script>
<script src="../../static-assets/highlight.pack.js"></script>
<script src="../../static-assets/URI.js"></script>
<script src="../../static-assets/script.js"></script>


</body>

</html>
